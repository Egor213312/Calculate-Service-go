# Calculate-Service-go
Web service on Go

Calculator Service

Описание

Этот проект представляет собой простой веб-сервис для выполнения математических вычислений. Он принимает математическое выражение в формате строки через HTTP POST запрос и возвращает результат вычисления.

Сервис реализован на языке программирования Go и использует стандартные библиотеки для обработки HTTP запросов и JSON.

Что делает сервис

Сервис выполняет следующие функции:

- Получает математическое выражение через POST запрос в формате JSON.
- Выполняет вычисление указанного выражения.
- Возвращает результат в формате JSON.

Пример успешного ответа:
```json
{
    "result": 6
}

Как работает сервис

Обработка запроса:
Сервис ожидает POST запрос по пути /api/v1/calculate. Запрос должен содержать JSON тело с полем expression, которое содержит математическое выражение для вычисления.

Вычисление:
Когда запрос поступает, сервис пытается вычислить результат выражения. Для этого используется простой парсер, который анализирует строку и выполняет операции с числами. Поддерживаются стандартные математические операции: сложение, вычитание, умножение и деление.

Обработка ошибок:
Если запрос не содержит правильного JSON формата или выражение не может быть обработано, сервис вернет ошибку с соответствующим сообщением:

Если формат JSON неверный, будет возвращена ошибка с кодом 400 и сообщением: Invalid JSON format.
Если выражение пустое или некорректное, возвращается ошибка с кодом 422 и сообщением: Expression is not valid.

Пример ответа об ошибке:

{
    "error": "Invalid JSON format"
}

Формат запроса: Пример запроса:

{
    "expression": "2+2"
}
Пример ответа:

{
    "result": 4
}


Обработка ошибок
Сервис обрабатывает различные типы ошибок:

Некорректный JSON:
Если тело запроса не является JSON, возвращается ошибка с кодом 400.

Некорректное выражение:
Если переданное выражение пустое или невалидное (например, содержит недопустимые символы), сервис возвращает ошибку с кодом 422 и сообщением о некорректности выражения.

   
Формат результатов:
Результат вычисления всегда возвращается как число, и в случае целых чисел результат будет отображаться как целое число (например, {"result": 6}). В случае вещественных чисел результат будет отображаться с плавающей точкой (например, {"result": 6.0}).

Валидация выражений:
Важно, чтобы выражения в запросе были корректными математически и логически. Если выражение не может быть интерпретировано, сервис вернет ошибку.


Тестирование

Проект включает автоматические тесты для проверки функциональности сервиса.

Как запустить тесты:
Чтобы запустить тесты, выполните команду в директории проекта:

bash

go test -v

что бы перейти в нужную директорию для выполнения теста, пропишите команду в консоли

cd D:\calc.service\cmd\calculate_service


Тесты проверяют:

Корректность вычислений для простых математических выражений.
Обработку ошибок для некорректных запросов.
Возврат правильного формата результата в случае успешного выполнения запроса.
Тесты находятся в файле main_test.go. В них описаны различные сценарии, такие как правильные математические выражения и некорректные запросы.


Запустить сервер можно с помощью команды: 
go run cmd/calculate_service/main.go

так же запускать в нужной директории:
cd D:\calc.service

HTTP-запрос на сервер выглядит так:

http://localhost:8080/api/v1/calculate

